<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="description" content="Turning HTML into PDF" />

  <title>PDF Downloader</title>

  <style>
    #pdf-page-viewer {
      width: 800px;
      height: 800px;
    }

    #pdf-page-viewer iframe{
      width: 100%;
      height: 100%;
    }

    .hidden {
      display: none;
    }
  </style>
</head>

<body>

  <div class="save-page-pdf">
    <style>
      .my-heading4 {
        background: darkgreen;
        color: white;
      }

      img {
        display: block;
        width: 300px;
      }
    </style>
    <h1>Heading 1</h1>
    <h2>Heading 2</h2>
    <h3>Heading 3</h3>
    <h4 class="my-heading4">Heading 4</h4>
    <p>
      Paragraph with <strong>bold</strong>, <i>italic</i>, <u>underline</u>,
      <s>strikethrough</s>,
      <strong><u><s><i>and all of the above</i></s></u></strong>
    </p>
    <img src="https://picsum.photos/200" alt="image"></img>
    <p>
      Paragraph with imageand
      <a href="http://google.com">link</a>
    </p>
    <hr />
    <ul>
      <li>Unordered item</li>
      <li>Unordered item</li>
    </ul>
    <ol>
      <li>Ordered item</li>
      <li>Ordered item</li>
    </ol>
    <br /><br /><br /><br /><br />
    Text outside of any tags
    <table>
      <thead>
        <tr>
          <th>Column 1</th>
          <th>Column 2</th>
          <th>Column 3</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Foo</td>
          <td>Bar</td>
          <td>Foobar</td>
        </tr>
        <tr>
          <td colspan="2">Foo</td>
          <td>Bar</td>
        </tr>
        <tr>
          <td>Some longer thing</td>
          <td>Even more content than before!</td>
          <td>Even more content than before!</td>
        </tr>
      </tbody>
    </table>
  </div>

  <button class="download-pdf-btn">
    Generate PDF
  </button>

  <!-- ELEMENT WITH ID "pdf-page-viewer" IS REQUIRED TO GENERATED THE PDF -->
  <div id="pdf-page-viewer" class="hidden"></div>

  <!-- THIS "page-pdf.js" IS THE BUNDLE GENERATED BY REACT -->
  <script src="page-pdf.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function(){
      addPDFPageEvent()
    })

    function addPDFPageEvent(){
      const downloadBtn = document.querySelector('.download-pdf-btn')

      if (!downloadBtn) return

      downloadBtn.addEventListener('click', generatePDFEvent)
    }

    function generatePDFEvent(){
      const myPage = document.querySelector('.save-page-pdf')
      const pdfViewer = document.querySelector('#pdf-page-viewer')

      if (!myPage || !pdfViewer) return

      // The bundle addes the "downloadPdf" function to the window object
      // Which expects an HTML string
      window.downloadPdf(myPage.outerHTML)

      pdfViewer.classList.remove('hidden')
    }
  </script>
</body>

</html>